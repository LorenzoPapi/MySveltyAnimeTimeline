/*! For license information please see main.1e3b3402.chunk.js.LICENSE.txt */
(this["webpackJsonpmy-anime-timeline"]=this["webpackJsonpmy-anime-timeline"]||[]).push([[0],{10:function(e,t,a){e.exports=a(25)},15:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),l=a(7),o=a.n(l),c=a(1),s=(a(15),r.a.memo((function(e){for(var t=e.links,a=[],n=0;n<t.length;++n){var i=Object(c.a)(t[n],2),l=i[0],o=i[1],s=n===t.length-1;a.push(r.a.createElement(r.a.Fragment,{key:"link-".concat(n)},r.a.createElement("a",{href:l},o),s?"":", "))}return r.a.createElement("p",null,"Links if something is broken: ",a)}))),u=a(8),m=a.n(u),d=a(9),p=a.n(d);!function(e){e.Anime="anime",e.Manga="manga"}(n||(n={}));var g,h=[n.Anime,n.Manga];!function(e){e.Completed="completed",e.PlanToWatch="plan_to_watch",e.Watching="watching"}(g||(g={}));var y,v=function(e){e=e.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},f=function(){return{username:v("username"),listType:v("list_type"),cap:Math.round(Number(v("cap"))),displayType:v("display_type")}},E=function(e){return e<10?"0"+e:e.toString()},b=function(e){return e.getFullYear()+"-"+E(e.getMonth()+1)+"-"+E(e.getDate())},k=a(3),_=a.n(k);!function(e){e.Point="point",e.Box="box",e.Range="range"}(y||(y={}));var x=[y.Point,y.Box,y.Range],T=r.a.memo((function(){var e=f(),t=e.username,a=e.listType===n.Manga?n.Manga:n.Anime,i=1e3===e.cap,l=e.displayType;x.includes(l)||(l=y.Box);var o=r.a.useState(t),s=Object(c.a)(o,2),u=s[0],m=s[1],d=r.a.useState(a),p=Object(c.a)(d,2),g=p[0],h=p[1],v=r.a.useState(i),E=Object(c.a)(v,2),b=E[0],k=E[1],_=r.a.useState(l),T=Object(c.a)(_,2),w=T[0],C=T[1];return r.a.createElement("form",null,r.a.createElement("div",{className:"username-input"},r.a.createElement("label",{htmlFor:"username"},"Enter your username:"),r.a.createElement("input",{type:"text",id:"username",name:"username",required:!0,placeholder:"e.g. Timbo_KZ",value:u,onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",{className:"radio-column-wrapper"},r.a.createElement("div",{className:"radio-column"},r.a.createElement("div",{className:"column-title"},"List type:"),r.a.createElement("input",{type:"radio",id:"radio-anime",name:"list_type",value:n.Anime,checked:g===n.Anime,onChange:function(){return h(n.Anime)}}),r.a.createElement("label",{htmlFor:"radio-anime"},"Anime list"),r.a.createElement("input",{type:"radio",id:"radio-manga",name:"list_type",value:n.Manga,checked:g===n.Manga,onChange:function(){return h(n.Manga)}}),r.a.createElement("label",{htmlFor:"radio-manga"},"Manga list"),r.a.createElement("hr",null),r.a.createElement("input",{type:"checkbox",id:"checkbox-cap",name:"cap",value:"1000",checked:b,onChange:function(e){return k(e.target.checked)}}),r.a.createElement("label",{htmlFor:"checkbox-cap"},"Cap at 1000 titles"))),r.a.createElement("div",{className:"radio-column-wrapper"},r.a.createElement("div",{className:"radio-column"},r.a.createElement("div",{className:"column-title"},"Display type:"),r.a.createElement("input",{type:"radio",id:"radio-point",name:"display_type",value:y.Point,checked:w===y.Point,onChange:function(){return C(y.Point)}}),r.a.createElement("label",{htmlFor:"radio-point"},"Point"),r.a.createElement("input",{type:"radio",id:"radio-box",name:"display_type",value:y.Box,checked:w===y.Box,onChange:function(){return C(y.Box)}}),r.a.createElement("label",{htmlFor:"radio-box"},"Box"),r.a.createElement("input",{type:"radio",id:"radio-range",name:"display_type",value:y.Range,checked:w===y.Range,onChange:function(){return C(y.Range)}}),r.a.createElement("label",{htmlFor:"radio-range"},"Range (duration)"))),r.a.createElement("input",{className:"go",type:"submit",value:"Go!"}))}));var w=function(){var e=r.a.useState(!0),t=Object(c.a)(e,2),a=t[0],n=t[1],l=r.a.useState("Enter your MAL credentials!"),o=Object(c.a)(l,2),u=o[0],d=o[1];Object(i.useEffect)((function(){var e=f(),t=e.username,a=e.listType,n=e.cap,i=e.displayType;t&&a&&i&&(h.includes(a)&&x.includes(i)?(d("Loading ".concat(t,"'s ").concat(a," list...")),function(e,t){var a=encodeURI("/v1?username=".concat(e,"&list_type=").concat(t)),n="".concat("https://wkup5ts6yk.execute-api.eu-west-2.amazonaws.com").concat(a);return p.a.resolve().then((function(){return m.a.get(n).accept("application/json")})).then((function(e){return e.status,e.body.list_entries}))}(t,a).then((function(e){var t=function(e){for(var t=[],a=0;a<e.length;a++){var n,i=e[a],r=i.node,l=i.list_status;if(i.list_status.status===g.Completed){var o=null,c=null;if(l.start_date&&l.finish_date&&!l.start_date.startsWith("0000-00-00")&&!(null===(n=l.finish_date)||void 0===n?void 0:n.startsWith("0000-00-00"))){if(o=new Date(l.start_date),(c=new Date(l.finish_date))<o){var s=[c,o];o=s[0],c=s[1]}o.toUTCString()===c.toUTCString()&&(isNaN(o.getTime())&&(o=new Date(l.updated_at)),c=_()(o).add(1,"day").toDate())}else o=new Date(l.updated_at),(c=_()(o).add(1,"day").toDate()).setDate(o.getDate()+1);var u={id:a,content:r.title,start:b(o),end:b(c)};t.push(u)}}return t.sort((function(e,t){return t.end.localeCompare(e.end)}))}(e),a=n>0?t.slice(0,n):t;console.log("Showing ".concat(a.length," out of ").concat(t.length," entries.")),function(e,t){var a=document.getElementById("visualization"),n=new vis.DataSet(e),i={height:"100%",align:"left",zoomMax:63072e7,zoomMin:864e6,type:t};new vis.Timeline(a,n,i)}(a,i),d("")})).catch((function(e){return d("Error: ".concat(e.message))}))):d("Invalid list type: ".concat(a,". Try resubmitting.")))}),[d]);var y=r.a.useCallback((function(){return n((function(e){return!e}))}),[]);return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"controls"},r.a.createElement("button",{onClick:y,className:"controls-toggle"},"Controls ",r.a.createElement("span",null,"(toggle)")),a&&r.a.createElement("div",{className:"controls-body"},r.a.createElement("p",null,"Welcome to ",r.a.createElement("strong",null,"MyAnimeTimeline"),"! This tool lets you visualise your MAL anime and manga progress throughout the years."),r.a.createElement(s,{links:[["https://foxypanda.me/my-anime-timeline-and-kuristina/","Article"],["https://github.com/TimboKZ/MyAnimeTimeline","GitHub"],["https://discord.gg/HT4ttdQ","Discord"]]}),r.a.createElement(T,null))),r.a.createElement("div",{id:"visualization"},""!==u&&r.a.createElement("div",{className:"vis-status"},u)))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.1e3b3402.chunk.js.map